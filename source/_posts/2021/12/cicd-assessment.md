---
title: 如何建立统一的规则来评估 CI/CD 成熟度
tags:
  - CI
  - CD
categories:
  - DevOps
date: 2021-12-07 22:02:53
author: shenxianpeng
---

## 问题

在一个组织内，不同的团队之间可能会有不同的维度来评估 CI/CD 的成熟度。这使得对衡量每个团队的 CI/CD 的表现变得困难。

因此组织内需要建立一个由团队成员一起讨论出来的标准来帮助团队建立明确的努力方向。

## 如何评估

在参考了开源项目 [best-practices-badge](https://github.com/coreinfrastructure/best-practices-badge)，结合我的实践，总结以下标准并分配了相应的成熟度徽章，供参考。

### 计算规则

1. 每个标准都有分数，通常一般的标准是10分，重要的标准是20分
2. 带有🔰的标准表示它们是必须要有的
3. 带有👍的标准意味着如果有会更好
4. 每个项目的标准分数之和落在的区间获得对应的徽章

### 徽章分数对照表

|徽章  | 分数 | 描述
|----  | --  | -- |
| 🚩WIP | < 100 | 小于100分获得 🚩Work In Progress 徽章 |
| ✅PASSING | = 100 | 等于100分获得 ✅PASSING 徽章 |
| 🥈SILVER | > 100 && <= 150 | 大于100，小于等于150分获得🥈银牌徽章 |
| 🥇GOLD | > 150 | 大于等于150分获得🥇金牌徽章 |

注：这个分数区间可调整。

### 标准和分数

|类别      | 标准              | 分数 | 描述 |
|----      | ----------------- | -----| ----------- |
|**基本**  | 🔰**构建任何分支** | **20** | Jenkins：支持任何分支构建 |
|          | 🔰**构建任何PR**  | **20** | Jenkins：支持对任何 Pull Request 在 Merge 之前进行构建 |
|          | 🔰上传制品        | 10 | Jenkins：构建产物上传到制品仓库保存 |
|          | 👍容器化构建      | 10  | 推荐使用容器化技术实现Pipeline |
| **质量** | 🔰**自动化测试**   | **20** | Jenkins：支持触发冒烟/单元/回归测试 |
|          | 👍性能测试        | 10 | Jenkins：支持触发性能测试 |
|          | 👍代码覆盖率收集  | 10 | Jenkins：支持获得代码覆盖率 |
| **安全** | 🔰漏洞扫描        | 10  |  Jenkins：支持触发漏洞扫描 |
|          | 🔰License扫描    | 10  | Jenkins：支持触发证书扫描 |
| **分析**  | 👍Code Lint     | 10  | Jenkins：支持对PR进行代码格式检查 |
|          | 👍静态代码分析    | 10  | Jenkins：支持对PR进行静态代码分析 |
|          | 👍动态代码分析    | 10  | Jenkins：支持对PR进行动态代码分析 |
| **报告** | 🔰Email或Slack通知 | 10 | 支持通过Email或Slack等方式通知 |

注：以Jenkins为例。

## 最终的结果

|No | Repository Name | 实现的标准 |徽章 |
|---| --------------- | --------- | ---- |
| 1 | project-a       | 🔰**构建任何分支**</br>🔰**构建任何PR**</br>🔰上传制品</br>🔰**自动化测试**</br>🔰Email或Slack通知 | 🚩WIP |
| 2 | project-b       | 🔰**构建任何分支**</br>🔰**构建任何PR**</br>🔰上传制品</br>🔰**自动化测试**</br>🔰漏洞扫描</br>🔰License扫描</br>🔰Email或Slack通知 | ✅PASSING |
| 3 | project-c       | 🔰**构建任何分支**</br>🔰**构建任何PR**</br>🔰上传制品</br>👍容器化构建</br>🔰**自动化测试**</br>🔰漏洞扫描</br>🔰License扫描</br>🔰Email或Slack通知 | 🥈SILVER |
| 4 | project-d       | 🔰**构建任何分支**</br>🔰**构建任何PR**</br>🔰上传制品</br>👍容器化构建</br>🔰**自动化测试**</br>👍性能测试</br>👍代码覆盖率收集</br>🔰漏洞扫描</br>🔰License扫描</br>👍Code Lint</br>👍静态代码分析</br>👍动态代码分析</br>🔰Email或Slack通知 | 🥇GOLD |

## Q&A

Q: 为什么使用徽章而不是分数？\
A: 使用徽章能更好的帮助团队朝着目标而不是分数努力

Q: 建立标准还有哪些帮助？\
A: 团队之间容易进行技术共享，方便未来纳入新的标准，保持团队之间在统一的高水准
